./clean

cd c
make
cd ..

mkdir ../docs
mkdir ../renders
mkdir ../renders/bin
mkdir ../renders/svg
mkdir ../renders/tiled/0
mkdir ../renders/tiled/1
mkdir ../renders/tiled/2
mkdir ../renders/tiled/3
mkdir ../renders/tiled/4

for fn in dat/json/*.json
do
	./retop $fn &
done
wait

for fn in dat/json/*.json
do
	echo "processing $fn"
	./json2png -noGridLines $fn &
	./json2svg -noGridLines $fn &
	./json2tiledpng 0 $fn &
	./json2tiledpng 1 $fn &
	./json2tiledpng 2 $fn &
	./json2tiledpng 3 $fn &
	./json2tiledpng 4 $fn &
	./json2bin $fn &
	./randomizejson $fn &
done
wait

for fn in dat/retop/*.json
do
	echo "processing $fn"  &
	./json2png -diagonals -selectiveGridLines $fn  &
	./json2svg -diagonals -selectiveGridLines $fn &
	./json2tiledpng -noLines 0 $fn &
	./json2tiledpng -noLines 1 $fn &
	./json2tiledpng -noLines 2 $fn &
	./json2tiledpng -noLines 3 $fn &
	./json2tiledpng -noLines 4 $fn &
	./json2bin $fn &
done
wait

for fn in dat/json_random/*.json
do
	echo "processing $fn"  &
	./json2png -diagonals -noGridLines $fn  &
	./json2svg -diagonals -noGridLines $fn &
	./json2tiledpng -noLines 0 $fn &
	./json2tiledpng -noLines 1 $fn &
	./json2tiledpng -noLines 2 $fn &
	./json2tiledpng -noLines 3 $fn &
	./json2tiledpng -noLines 4 $fn &
	./json2bin $fn &
done
wait

for fn in dat/svg/*.svg
do
	svgo $fn $fn &
done
wait


./testbin
./gensite